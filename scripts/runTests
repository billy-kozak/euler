#!/bin/bash
###############################################################################
# Runs test binary files                                                      #
###############################################################################
###############################################################################
#                                  CONSTANTS                                  #
###############################################################################
NO_LEAK_STRING="No memory leaks."
###############################################################################
#                                    CODE                                     #
###############################################################################
for f in $@
do
	echo "Running test \"$(basename $f)\"..."

	MALLOC_TRACE=tests/info/mtrace_$(basename $f).txt
	export MALLOC_TRACE
	rm -f ${MALLOC_TRACE}

	$f

	#keep output silent if no errors...
	mtrace ${MALLOC_TRACE} | sed "0,/^${NO_LEAK_STRING}/{//d;}"
done
